{% extends "base.html" %}

{% block title %}Iniciar SesiÃ³n - Catalogo Joyero{% endblock %}

{% block extra_head %}
{% endblock %}

{% block header %}Iniciar SesiÃ³n{% endblock %}

{% block content %}
{% if session.usuario %}
<p>
    Ya estÃ¡s logueado como {{ session.usuario }}.
    <button type="button" onclick="window.location.href='/logout'" class="btn-secondary">Cerrar SesiÃ³n</button>
</p>
{% else %}
<section id="login-form">
    <form method="POST">
        <p>
            <label for="login_input">Nombre de Usuario o Email:</label>
            <input
                type="text"
                id="login_input"
                name="login_input"
                placeholder="Introduce tu nombre de usuario o email"
                required
            />
        </p>
        <p>
            <label for="password">ContraseÃ±a:</label>
            <input
                type="password"
                id="password"
                name="password"
                placeholder="Introduce tu contraseÃ±a"
                required
            />
            <span class="toggle-password" onclick="togglePasswordVisibility()">ğŸ‘ï¸</span>
        </p>
        <p>
            <input type="submit" value="Iniciar SesiÃ³n" class="login btn-primary" />
        </p>
    </form>
    <p>
        <a href="{{ url_for('forgot_password') }}">Â¿Olvidaste tu contraseÃ±a?</a>
    </p>
    <p>
        Â¿No tienes cuenta? <a href="{{ url_for('register') }}">RegÃ­strate aquÃ­</a>
    </p>
</section>
{% endif %}
{% endblock %}

{% block scripts %}
<script>
    function togglePasswordVisibility() {
        const passwordInput = document.getElementById("password");
        if (passwordInput.type === "password") {
            passwordInput.type = "text";
        } else {
            passwordInput.type = "password";
        }
    }
</script>
{% endblock %}
